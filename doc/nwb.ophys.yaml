groups:
- attributes: []
  datasets: []
  doc: Image stack recorded over time from 2-photon microscope.
  links:
  - doc: Link to ImagingPlane object from which this TimeSeries data was generated.
    name: imaging_plane
    target_type: ImagingPlane
  neurodata_type_def: TwoPhotonSeries
  neurodata_type_inc: ImageSeries
- datasets:
  - dims:
    - - num_times
    - - num_times
      - num_ROIs
    doc: Signals from ROIs.
    dtype: numeric
    name: data
    shape:
    - - null
    - - null
      - null
  - doc: DynamicTableRegion referencing into an ROITable containing information on
      the ROIs stored in this timeseries.
    name: rois
    neurodata_type_inc: DynamicTableRegion
  doc: ROI responses over an imaging plane. Each row in data should correspond to
    the signal from one ROI. Each element on the second dimension of data should correspond
    to the signal from one ROI.
  neurodata_type_def: RoiResponseSeries
  neurodata_type_inc: TimeSeries
- default_name: DfOverF
  doc: dF/F information about a region of interest (ROI). Storage hierarchy of dF/F
    should be the same as for segmentation (i.e., same names for ROIs and for image
    planes).
  groups:
  - doc: RoiResponseSeries object(s) containing dF/F for a ROI.
    neurodata_type_inc: RoiResponseSeries
    quantity: +
  neurodata_type_def: DfOverF
  neurodata_type_inc: NWBDataInterface
- default_name: Fluorescence
  doc: Fluorescence information about a region of interest (ROI). Storage hierarchy
    of fluorescence should be the same as for segmentation (ie, same names for ROIs
    and for image planes).
  groups:
  - doc: RoiResponseSeries object(s) containing fluorescence data for a ROI.
    neurodata_type_inc: RoiResponseSeries
    quantity: +
  neurodata_type_def: Fluorescence
  neurodata_type_inc: NWBDataInterface
- default_name: ImageSegmentation
  doc: Stores pixels in an image that represent different regions of interest (ROIs)
    or masks. All segmentation for a given imaging plane is stored together, with
    storage for multiple imaging planes (masks) supported. Each ROI is stored in its
    own subgroup, with the ROI group containing both a 2D mask and a list of pixels
    that make up this mask. Segments can also be used for masking neuropil. If segmentation
    is allowed to change with time, a new imaging plane (or module) is required and
    ROI names should remain consistent between them.
  groups:
  - datasets:
    - dims:
      - - num_roi
        - num_x
        - num_y
      - - num_roi
        - num_x
        - num_y
        - num_z
      doc: ROI masks for each ROI. Each image mask is the size of the original imaging
        plane (or volume) and members of the ROI are finite non-zero.
      name: image_mask
      neurodata_type_inc: VectorData
      quantity: '?'
      shape:
      - - null
        - null
        - null
      - - null
        - null
        - null
        - null
    - doc: Index into pixel_mask.
      name: pixel_mask_index
      neurodata_type_inc: VectorIndex
      quantity: '?'
    - doc: 'Pixel masks for each ROI: a list of indices and weights for the ROI. Pixel
        masks are concatenated and parsing of this dataset is maintained by the PlaneSegmentation'
      dtype:
      - doc: Pixel x-coordinate.
        dtype: uint
        name: x
      - doc: Pixel y-coordinate.
        dtype: uint
        name: y
      - doc: Weight of the pixel.
        dtype: float
        name: weight
      name: pixel_mask
      neurodata_type_inc: VectorData
      quantity: '?'
    - doc: Index into voxel_mask.
      name: voxel_mask_index
      neurodata_type_inc: VectorIndex
      quantity: '?'
    - doc: 'Voxel masks for each ROI: a list of indices and weights for the ROI. Voxel
        masks are concatenated and parsing of this dataset is maintained by the PlaneSegmentation'
      dtype:
      - doc: Voxel x-coordinate.
        dtype: uint
        name: x
      - doc: Voxel y-coordinate.
        dtype: uint
        name: y
      - doc: Voxel z-coordinate.
        dtype: uint
        name: z
      - doc: Weight of the voxel.
        dtype: float
        name: weight
      name: voxel_mask
      neurodata_type_inc: VectorData
      quantity: '?'
    doc: Results from image segmentation of a specific imaging plane.
    groups:
    - doc: Image stacks that the segmentation masks apply to.
      groups:
      - doc: One or more image stacks that the masks apply to (can be one-element
          stack).
        neurodata_type_inc: ImageSeries
        quantity: '*'
      name: reference_images
    links:
    - doc: Link to ImagingPlane object from which this data was generated.
      name: imaging_plane
      target_type: ImagingPlane
    neurodata_type_def: PlaneSegmentation
    neurodata_type_inc: DynamicTable
    quantity: +
  neurodata_type_def: ImageSegmentation
  neurodata_type_inc: NWBDataInterface
- datasets:
  - doc: Description of the imaging plane.
    dtype: text
    name: description
    quantity: '?'
  - doc: Excitation wavelength, in nm.
    dtype: float
    name: excitation_lambda
  - doc: Rate that images are acquired, in Hz.
    dtype: float
    name: imaging_rate
  - doc: Calcium indicator.
    dtype: text
    name: indicator
  - doc: Location of the imaging plane. Specify the area, layer, comments on estimation
      of area/layer, stereotaxic coordinates if in vivo, etc. Use standard atlas names
      for anatomical regions when possible.
    dtype: text
    name: location
  - attributes: []
    dims:
    - - height
      - width
      - x|y|z
    - - height
      - width
      - depth
      - x|y|z
    doc: Physical position of each pixel. 'xyz' represents the position of the pixel
      relative to the defined coordinate space.
    dtype: float32
    name: manifold
    quantity: '?'
    shape:
    - - null
      - null
      - 3
    - - null
      - null
      - null
      - 3
  - doc: Describes position and reference frame of manifold based on position of first
      element in manifold. For example, text description of anatomical location or
      vectors needed to rotate to common anatomical axis (eg, AP/DV/ML). This field
      is necessary to interpret manifold. If manifold is not present then this field
      is not required.
    dtype: text
    name: reference_frame
    quantity: '?'
  doc: An imaging plane and its metadata.
  groups:
  - datasets:
    - doc: Description or other notes about the channel.
      dtype: text
      name: description
    - doc: Emission wavelength for channel, in nm.
      dtype: float
      name: emission_lambda
    doc: An optical channel used to record from an imaging plane.
    neurodata_type_def: OpticalChannel
    neurodata_type_inc: NWBContainer
  links:
  - doc: Link to the Device object that was used to record from this electrode.
    name: device
    target_type: Device
  neurodata_type_def: ImagingPlane
  neurodata_type_inc: NWBContainer
  quantity: '*'
- default_name: MotionCorrection
  doc: 'An image stack where all frames are shifted (registered) to a common coordinate
    system, to account for movement and drift between frames. Note: each frame at
    each point in time is assumed to be 2-D (has only x & y dimensions).'
  groups:
  - doc: Reuslts from motion correction of an image stack.
    groups:
    - doc: Image stack with frames shifted to the common coordinates.
      name: corrected
      neurodata_type_inc: ImageSeries
    - doc: Stores the x,y delta necessary to align each frame to the common coordinates,
        for example, to align each frame to a reference image.
      name: xy_translation
      neurodata_type_inc: TimeSeries
    links:
    - doc: Link to ImageSeries object that is being registered.
      name: original
      target_type: ImageSeries
    neurodata_type_def: CorrectedImageStack
    neurodata_type_inc: NWBDataInterface
    quantity: +
  neurodata_type_def: MotionCorrection
  neurodata_type_inc: NWBDataInterface
